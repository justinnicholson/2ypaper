?appkly
?apply
?mean
mean(2,
-100,
-4,
3,
-230,
5)
2 + -100 + -4 + 3 + -230 + 5
-324 / 6
which(data$t.ccode[1] == arch$ccode & arch$estartdate <= data$INIT_DATE[1] & data$INIT_DATE[1] <= arch$eoutdate)
class(INIT_DATE)
class(sdate)
head(INIT_DATE)
cdate = as.Date(INIT_DATE, format = '%m/%d/$y')
cdate
cdate
as.Date(INIT_DATE[1], format = '%m/%d/$y')
as.Date(as.charecter(INIT_DATE[1]), format = '%m/%d/$y')
as.Date(as.character(INIT_DATE[1]), format = '%m/%d/$y')
INIT_DATE[1]
as.Date(as.character(INIT_DATE[1]), format = '%m/%d/%y')
as.Date(INIT_DATE[1], format = '%m/%d/%y')
rm(cdate)
as.Date(INIT_DATE[1], format = '%m/%d/%y')
einitdate = as.Date(INIT_DATE, format = '%m/%d/%y')
einitdate
data$einitdate <- einitdate
head(which(data$t.ccode == arch$ccode & arch$estartdate <= data$einitdate & data$einitdate <= arch$eoutdate))
which(data$t.ccode[1] == arch$ccode & arch$estartdate <= data$einitdate[1] & data$einitdate[1] <= arch$eoutdate)
which(data$t.ccode[2] == arch$ccode & arch$estartdate <= data$einitdate[2] & data$einitdate[2] <= arch$eoutdate)
?which
?match
match(data$t.ccode[2] == arch$ccode & arch$estartdate <= data$einitdate[2] & data$einitdate[2] <= arch$eoutdate)
which(data$t.ccode[2] == arch$ccode & arch$estartdate <= data$einitdate[2] & data$einitdate[2] <= arch$eoutdate)
which(data$t.ccode[2] == arch$ccode)
data$t.ccode[2]
arch$ccode[2640]
arch$ccode[2641]
arch$ccode[which(data$t.ccode[2] == arch$ccode)]
arch$ccode[which(data$t.ccode[2] == arch$ccode) $ data$einitdate >= arch$estartdate]
which(data$t.ccode[2] == arch$ccode)
which(data$t.ccode[2] == arch$ccode & data$einitdate >= arch$estartdate)
which(data$t.ccode[2] == arch$ccode & data$einitdate[2] >= arch$estartdate)
data$einitdate[2]
which(data$t.ccode[2] == arch$ccode & data$einitdate[2] >= arch$estartdate)
arch$estartdate[which(data$t.ccode[2] == arch$ccode)]
arch$estartdate[which(data$t.ccode[2] == arch$ccode)]
ls(arch)
arch$eindate[which(data$t.ccode[2] == arch$ccode)]
which(data$t.ccode[2] == arch$ccode & data$einitdate[2] >= arch$eintdate)
which(data$t.ccode[2] == arch$ccode & data$einitdate[2] >= arch$eindate)
arch$eindate[(data$t.ccode[2] == arch$ccode & data$einitdate[2] >= arch$eindate)]
arch$eindate[(data$t.ccode[2] == arch$ccode]
arch$eindate[data$t.ccode[2] == arch$ccode]
data$einitdate[2]
which(data$t.ccode[2] == arch$ccode & data$einitdate[2] >= arch$eindate)
ls(data)
ls(arch)
which(data$t.ccode[2] == arch$ccode & data$einitdate[2] >= arch$eindate & data$einitdate[2] <= data$eoutdate)
which(data$t.ccode[2] == arch$ccode & data$einitdate[2] >= arch$eindate & data$einitdate[2] <= arch$eoutdate)
arch[2642,]
which(data$t.ccode[2] == arch$ccode & data$einitdate[2] >= arch$eindate & data$einitdate[2] <= arch$eoutdate)
arch[2642,]
i = 2
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
currentleader
t.tenure = NULL
t.tenure[i] = data$einitdate[i] - arch$eindate[currentleader]
t.tenure
currentleader
data$einitdate[2]
arch#eindate[currentleader]
arch$eindate[currentleader]
data$einitdate[2]
data$einitdate[2] - arch$eindate[currentleader]
t.tenure
rm(t.tenure)
i
t.tenure = matrix(NA, nrow(data). 1)
t.tenure = matrix(NA, nrow(data), 1)
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
currentleader
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
tencalc
t.tenure <- cbind(t.tenure, tencalc)
t.tenure
t.tenure = NULL
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
t.tenure <- cbind(t.tenure, tencalc)
t.tenure
i = 3
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
t.tenure <- cbind(t.tenure, tencalc)
t.tenure
dim(t.tenure)
t.tenure = NULL
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
t.tenure <- rbind(t.tenure, tencalc)
t.tenure
i = 2
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
t.tenure <- rbind(t.tenure, tencalc)
t.tenure
rm(t.tenure)
?vector
tencalc = vector(NA, nrow(data))
tencalc = vector(integer, nrow(data))
tencalc = vector(integer, length = nrow(data))
tencalc <- vector(integer, length = nrow(data))
tencalc = matrix(NA,nrow(data), 1)
tencalc
for (i in 1:nrow(data)){
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
t.tenure[i] <- tencalc
}
tencalc
rm(tencalc)
t.tenure = matrix(NA,nrow(data), 1)
t.tenure = matrix(NA,nrow(data),1)
for (i in 1:nrow(data)){
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
t.tenure[i] = tencalc
}
t.tenure = matrix(NA,nrow(data),1)
for (i in 1:nrow(data)){
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
if(length(tencalc)>0){
t.tenure[i] = tencalc
}else{
t.tenure[i] = NA
}
}
t.tenure
head(t.tenure)
t.tenure
View(t.tenure)
t.tenure = matrix(NA,nrow(data),1)
for (i in 1:nrow(data)){
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
if(length(tencalc)>0){
t.tenure[i] = tencalc
}else{
t.tenure[i] = NA
}
}
warnings()
traceback()
warning(2)
warning(1)
warnings(2)
warnings()
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
currentleader
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
tencalc
length(tencalc)
if(length(tencalc)>0){
print("sucess")
}else{
print("failure")
}
t.tenure = matrix(NA,nrow(data),1)
for (i in 1:nrow(data)){
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
if(length(tencalc)>0){
t.tenure[i] = tencalc
}else{
t.tenure[i] = c("NA")
}
}
warinings()
warnings()
warnings(2)
warnings()[2]
tencalc = matrix(NA, nrow(data), 1)
for (i in 1:nrow(data)){
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc[i] = as.integer(data$einitdate[i] - arch$eindate[currentleader])
}
i = 7
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
currentleader
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
tencalc
x = is.na(x)
x = 4
x = is.na(x)
x
x
is.na(x)
x = 4
x<- is.na(x)
x
rm(x)
for (i in 1:nrow(data)){
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
if(length(tencalc)>0){
t.tenure[i] = tencalc
}elseif(length(tencalc == 0)){
t.tenure[i] = NA
}else{
print(length(tencalc))
}
}
t.tenure = matrix(NA,nrow(data),1)
rm(tencalc)
for (i in 1:nrow(data)){
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
if(length(tencalc)>0){
t.tenure[i] = tencalc
}else if(length(tencalc == 0)){
t.tenure[i] = NA
}else{
print(length(tencalc))
}
}
t.tenure
tencalc
tencalc = 203
length(tencalc)
tencalc = 54049485
length(tencalc)
for (i in 1:nrow(data)){
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
print(length(tencalc))
}
for (i in 1:nrow(data)){
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
if(length(tencalc)>0){
t.tenure[i] = tencalc
}elseif(length(tencalc == 0)){
t.tenure[i] = NA
}else{
print("ERROR ERROR ERRROR")
}
}
for (i in 1:nrow(data)){
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
if(length(tencalc)>0){
t.tenure[i] = tencalc
}elseif(length(tencalc == 0)){
for (i in 1:nrow(data)){
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
if(length(tencalc)>0){
t.tenure[i] = tencalc
} elseif(length(tencalc == 0)){
t.tenure[i] = NA
}else{
print("ERROR ERROR ERRROR")
}
}
for (i in 1:nrow(data)){
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
if(length(tencalc)>0){
t.tenure[i] = tencalc
} else if(length(tencalc == 0)){
t.tenure[i] = NA
}else{
print("ERROR ERROR ERRROR")
}
}
for (i in 1:nrow(data)){
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
if(length(tencalc)>0){
t.tenure[i] = tencalc
} else if(length(tencalc == 0)){
t.tenure[i] = NA
}else if(length(tencalc >1){
print("ERROR ERROR ERRROR")
}
}
for (i in 1:nrow(data)){
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
if(length(tencalc)>0){
t.tenure[i] = tencalc
} else if(length(tencalc == 0)){
t.tenure[i] = NA
}else if(length(tencalc >1){
print("ERROR ERROR ERRROR")
}
}
tencalc
length(tencalc)
as.integer(tencalc)
as.integer(length(tencalc))
as.integer(length(c))
as.integer(length(c)) > 0
as.integer(length(c)) == 0
as.integer(length(integer(0))) == 0
for (i in 1:nrow(data)){
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
if(length(tencalc)>0){
t.tenure[i] = tencalc
} else if(length(tencalc == 0)){
t.tenure[i] = NA
} else if(length(tencalc >1){
print("ERROR ERROR ERRROR")
}
}
for (i in 1:nrow(data)) {
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
if(length(tencalc)>0){
t.tenure[i] = tencalc
} else if(length(tencalc == 0)){
t.tenure[i] = NA
} else if(length(tencalc >1){
print("ERROR ERROR ERRROR")
}
for (i in 1:nrow(data)) {
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
if(length(tencalc)>0){
t.tenure[i] = tencalc
} else if(length(tencalc == 0)) {
t.tenure[i] = NA
} else if(length(tencalc >1){
print("ERROR ERROR ERRROR")
}
}
for (i in 1:nrow(data)) {
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
if(length(tencalc)>0){
t.tenure[i] = tencalc
} else if(length(tencalc == 0)) {
t.tenure[i] = NA
} else if(length(tencalc >1){
for (i in 1:nrow(data)) {
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
if(length(tencalc)>0){
t.tenure[i] = tencalc
} else if(length(tencalc == 0)) {
t.tenure[i] = NA
} else if(length(tencalc >1) {
for (i in 1:nrow(data)) {
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
if(length(tencalc)>0){
t.tenure[i] = tencalc
} else if(length(tencalc == 0)) {
t.tenure[i] = NA
} else if(length(tencalc) > 1) {
print("ERROR ERROR ERRROR")
}
}
class(t.tenure)
t.tenure[3,1]
t.tenure[3,1] = NA
t.tenure[3] = NA
t.tenure[3]
t.tenure[4]
t.tenure[5]
for (i in 1:nrow(data)) {
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
if(length(tencalc)>0){
t.tenure[i] = tencalc
} else if(length(tencalc) == 0) {
t.tenure[i] = NA
} else if(length(tencalc) > 1) {
print("ERROR ERROR ERRROR")
}
}
for (i in 1:nrow(data)) {
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
if(length(tencalc)==1){
t.tenure[i] = tencalc
} else if(length(tencalc) == 0) {
t.tenure[i] = NA
} else if(length(tencalc) > 1) {
print("ERROR ERROR ERRROR")
}
}
for (i in 1:nrow(data)) {
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
if(length(tencalc)==1){
t.tenure[i] = tencalc
} else if(length(tencalc) == 0) {
t.tenure[i] = NA
} else if(length(tencalc) > 1) {
cat("ERROR ERROR ERRROR", i)
}
}
i = 4542
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
currentleader
which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
arch[2935:2936,]
data$einitdate[i]
i = 3940
cwhich(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
arch[2736:2737,]
data#einitdate[i]
arch[2736:2737,]
data$einitdate[i]
t.tenure
which(t.tenure < 1)
t.tenure
data$INV_CTY_CODE[6231]
data$INV_CTY_NAME[6231]
data$t.ccode[6231]
ls(arch)
which(arch$ccode == 820)
data$INIT_YEAR[6231]
data$INIT_DATE[6231]
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
currentleader
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] < arch$eoutdate)
currentleader
i
arch[currentleader]
arch[currentleader,]
i
data$INIT_DATE[3940]
t.tenure = matrix(NA,nrow(data),1)
for (i in 1:nrow(data)) {
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] <= arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
if(length(tencalc)==1){
t.tenure[i] = tencalc
} else if(length(tencalc) == 0) {
t.tenure[i] = NA
} else if(length(tencalc) > 1) {
currentleader = which(data$t.ccode[i] == arch$ccode & data$einitdate[i] >= arch$eindate & data$einitdate[i] < arch$eoutdate)
tencalc = as.integer(data$einitdate[i] - arch$eindate[currentleader])
t.tenure[i] = tencalc
}
else {
print("ERROR")
}
}
t.tenure
which(t.tenure == NA)
which(t.tenure == "NA")
which(is.na(t.tenure))
length(which(is.na(t.tenure)))
ttenuremod = t.tenure[INIT_DATE <= 12/31/2004,]
ttenuremod = t.tenure[INIT_DATE <= 12/31/2004,]
ttenuremod = t.tenure[einitdate <= 12/31/2004,]
ttenuremod
einitdate<= 12/31/2004
einitdate<= 12/31/2004
max(einitdate)
min(einitdate)
which(einitdate<= 2004-12-31)
which(einitdate<= "2004-12-31")
einitdate[4775]
rm(ttenuremod)
ttenuremod = t.tenure[einitdate<= "2004-12-31",]
ttenuremod
rm(ttenuremod)
ttenuremod = t.tenure[(einitdate<= "2004-12-31") & (ccode != 994) ,]
ttenuremod = t.tenure[(einitdate<= "2004-12-31") & (t.ccode != 994) ,]
ttenuremod
which(is.na(ttenuremod))
length(which(is.na(ttenuremod)))
t.tenure
data$t.tenure <- t.tenure
data$t.tenure
rm(t.tenure)
data$t.tenure
t.ccode[data$INV_CTY_NAME == "GERMANY"
]
t.ccode[data$INV_CTY_NAME == "USA"]
t.ccode[data$INV_CTY_NAME == "Germany"]
ls(arch)
arch$ccode[arch$idacr == "Germany"]
arch$ccode[arch$idacr == "GMY"]
arch$ccode[arch$idacr == "GFR"]
arch[arch$idacr == "GFR",]
t.ccode[data$INV_CTY_NAME == "Germany"]
t.ccode[data$INV_CTY_NAME == "West Germany"]
library(countrycode)
countrycode("DEU", iso3c, cown)
countrycode("DEU", iso3n, cown)
countrycode("DEU", "iso3n", cown)
countrycode("DEU", "iso3n", "cown")
countrycode("DEU", "iso3c", "cown")
arch[arch$idacr == "GFR",]
arch$ccode[arch$idacr == "GFR"]
arch$ccode[arch$idacr == "GDR"]
arch$ccode[arch$idacr == "GFR"]
arch$ccode[arch$idacr == "GFR"] = 255
write.csv(data, "data.csv")
getwd()
save.image(file = "adjudication.rda")
